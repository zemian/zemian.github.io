<!DOCTYPE html>
<html>
    <head lang="en">
        <title>How to manage Maven third party jars &mdash; Zemian&#039;s Blog</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="robots" content="index, follow">
        <link rel="stylesheet" href="/build/app.css">

        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Zemian&#039;s Blog activity feed" />
                                        
                <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135626598-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-135626598-1');
        </script>
        
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1148923977922702" crossorigin="anonymous"></script>
            </head>
    <body>

    <div id="app">
        <div class="navbar is-primary">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item" href="/">
                        <img src="/build/images/zblog.svg" height="28">
                    </a>

                    <a class="navbar-burger" id="navbarMenuButton">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div class="navbar-menu" id="navbarMenu">
                    <div class="navbar-end is-size-4">
                        <a href="/tags" class="navbar-item">Tags</a>
                        <a href="/about" class="navbar-item">About</a>
                        <a href="/atom.xml" class="navbar-item">Feed</a>
                        <a href="/search" class="navbar-item">Search</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="container">
                <div class="columns is-centered">
                    <div class="column is-two-thirds">
                            <div class="level">
        <div class="level-item">
            Jun 23, 2013
        </div>
    </div>
    <div class="level">
        <div class="level-item">
                        <a class="tag mr-1" href="/blog/tags/maven">maven</a>
                    </div>
    </div>

    <h1 class="title">How to manage Maven third party jars</h1>
    <div class="content">
        <h2 id="how-to-manage-maven-third-party-jars">How to manage Maven third party jars</h2>

<p>When you find yourself the need to load third party jars into Maven repository,
there are few steps you normally do to test it out. You first install them
locally into <code>$HOME/.m2/repository</code>, and then create your project pom that
list those dependency. When things look good, then you deploy into your own
hosted repository. The following scripts will help you perform these tasks.</p>

<p>Tip</p>

<p>If you have lot&#8217;s of jars under a group, it&#8217;s more conveninent to create
an extra pom that list these dependency and install/deploy it into the repository
as well. And then your project would only need to include one dependency
with <code>&lt;type&gt;pom&lt;/type&gt;</code>.</p>

<p>file: <code>bin/mvn-install.sh</code></p>

<pre><code>#!/usr/bin/env bash
#
# Install local jar files into Maven repository. The artifact name would be same
# as the filename minus the extension.
# :Author: Zemian Deng
# :date: 2013T00:00:00-05:00
#
# Usage:
#   # Print as maven dependency used in pom file
#   mvn-install.sh mygroup 1.0.0 lib/*.jar
#
#   # Install jar files into local maven repo
#   RUN_TYPE=install mvn-install.sh mygroup 1.0.0 lib/*.jar
#
#   # Deploy jar files into remote maven repo
#   export REPO_URL=http://localhost/nexus/content/repositories/thirdparty
#   RUN_TYPE=deploy mvn-install.sh mygroup 1.0.0 lib/*.jar
#

# Capture command arguments and options
GROUP=$1
shift
VERSION=$1
shift
FILES="$@"
if [[ "$GROUP" == "" || "$VERSION" == "" || "$FILES" == "" ]]; then
 printf "ERROR: invalid arguments: GROUP VERSION FILES...\n"
 exit 1
fi

RUN_TYPE=${RUN_TYPE:="print"} # values: print|install|deploy
REPO_ID=${REPO_ID:="nexus-server"} # Id defined in user's settings.xml for authentication
REPO_URL=${REPO_URL:="http://localhost/nexus/content/repositories/thirdparty"}

# For each file, perform action based on run type.
for FILE in $FILES; do
 ARTIFACT=`basename $FILE '.jar'`
 if [[ "$RUN_TYPE" == "deploy" ]]; then
  printf "Deploying file=$FILE as artifact=$ARTIFACT to repo=$REPO_URL\n"
  mvn deploy:deploy-file \
   -DrepositoryId=$REPO_ID -Durl=$REPO_URL \
   -DgroupId=$GROUP -DartifactId=$ARTIFACT -Dversion=$VERSION -Dpackaging=jar \
   -Dfile=$FILE
 elif [[ "$RUN_TYPE" == "install" ]]; then
  printf "Installing file=$FILE as artifact=$ARTIFACT\n"
  mvn install:install-file \
   -DgroupId=$GROUP -DartifactId=$ARTIFACT -Dversion=$VERSION -Dpackaging=jar \
   -Dfile=$FILE
 elif [[ "$RUN_TYPE" == "print" ]]; then
  printf "        &lt;dependency&gt;\n"
  printf "            &lt;groupId&gt;$GROUP&lt;/groupId&gt;\n"
  printf "            &lt;artifactId&gt;$ARTIFACT&lt;/artifactId&gt;\n"
  printf "            &lt;version&gt;$VERSION&lt;/version&gt;\n"
  printf "        &lt;/dependency&gt;\n"
 fi
done
</code></pre>

<p>Last updated 2013-06-18 19:14:37 EDT</p>

    </div>

        <br/>
    <ul>
                <li class="block">Next: <a href="/blog/2013/how-to-convert-asciidoc-text-to-html-using-groovy" title="How to convert asciidoc text to html using Groovy"><span>How to convert asciidoc text to html using Groovy</span></a></li>
                        <li class="block">Previous: <a href="/blog/2013/how-to-zip-up-a-release-from-a-hg-repository" title="How to zip up a release from a hg repository"><span>How to zip up a release from a hg repository</span></a></li>
            </ul>
    
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="columns">
                <div class="column">
                    <div class="level">
                        <div class="level-item">
                            <a href="https://bulma.io">
                                <img
                                    src="/build/images/made-with-bulma.png"
                                    alt="Made with Bulma"
                                    width="128"
                                    height="24">
                            </a>
                            <a href="https://sculpin.io" class="mx-3">
                                <div class="width: 128px; height: 24px;">
                                <img
                                    src="/build/images/sculpin-mascot-jackson-micro.png"
                                    alt="Made with Sculpin"
                                    width="100%"
                                    height="100%">
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="level">
                        <div class="level-item">
                            <a href="/sitemap.xml">
                                SiteMap
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script to enable responsive navbar hamburger menu -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.querySelector('#navbarMenuButton');
            btn.addEventListener('click', () => {
                btn.classList.toggle('is-active');
                const menu = document.querySelector('#navbarMenu');
                menu.classList.toggle('is-active');
            });
        });
    </script>

        <script src="/build/app.js"></script>
    
        
    </body>
</html>
