<!DOCTYPE html>
<html>
    <head lang="en">
        <title>EE JSP - Generating Dynamic Content with Custom Tag Libraries &mdash; Zemian&#039;s Blog</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="robots" content="index, follow">
        <link rel="stylesheet" href="/build/app.css">

        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Zemian&#039;s Blog activity feed" />
                                        
                <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135626598-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-135626598-1');
        </script>
        
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1148923977922702" crossorigin="anonymous"></script>
            </head>
    <body>

    <div id="app">
        <div class="navbar is-primary">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item" href="/">
                        <img src="/build/images/zblog.svg" height="28">
                    </a>

                    <a class="navbar-burger" id="navbarMenuButton">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div class="navbar-menu" id="navbarMenu">
                    <div class="navbar-end is-size-4">
                        <a href="/tags" class="navbar-item">Tags</a>
                        <a href="/about" class="navbar-item">About</a>
                        <a href="/atom.xml" class="navbar-item">Feed</a>
                        <a href="/search" class="navbar-item">Search</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="container">
                <div class="columns is-centered">
                    <div class="column is-two-thirds">
                            <div class="level">
        <div class="level-item">
            Feb 02, 2015
        </div>
    </div>
    <div class="level">
        <div class="level-item">
                        <a class="tag mr-1" href="/blog/tags/jsp">jsp</a>
                        <a class="tag mr-1" href="/blog/tags/tag">tag</a>
                    </div>
    </div>

    <h1 class="title">EE JSP - Generating Dynamic Content with Custom Tag Libraries</h1>
    <div class="content">
        <p>When developing View layer in a web application, you want to try not to duplicate content in JSP files as much as possible. The JSP spec API allows you to reduce this duplication by using tag libraries. A custom JSP tag is a user defined xml tag element that you can insert into JSP file to replace with some dynamic content.</p>

<p>Here is an simple <a href="https://github.com/saltnlight5/java-ee6-examples/blob/master/jsp-example/">jsp-example</a> using a custom JSP tag that insert a server time stamp value:</p>

<pre><code>&lt;%@ taglib prefix="myapp" tagdir="/WEB-INF/myappTags" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello World!&lt;/h1&gt;
        &lt;p&gt;Page served on &lt;myapp:serverTime pattern="yyyy-MM-dd HH:mm:ss"/&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>JSP tags can also allow you to pass in parameters as attributes of the tag. In the example above <myapp:serverTime> tag uses a custom pattern attribute to control how the date string should be formatted.</p>

<p>JSP tags can also be nested with sub tags, or any HTML content elements. The nested JSP tags can provide a way for you to conditionally render the enclosed content. Using tag to render conditional content is more verbose due to XML structure, but it eliminates the use of direct Scriptlet code in JSP.</p>

<p>There are two ways you can create custom JSP tags. The first method is to implement the tag using pure Java code and then register it with a XML taglib definition file. I will skip this method for now and show you another easier way.</p>

<p>The second method uses "Tag Files" that are similar to JSP pages to construct a tag (remember that JSP tag is nothing more than just a placeholder for some content!). I am going to show you how the second method is done for above example. First create a serverTime.tag file under your src/main/webapp/WEB-INF/tags/myapp project folder.</p>

<pre><code>&lt;%@ attribute name="pattern" required="true" %&gt;
&lt;%@ tag import="java.util.Date, java.text.SimpleDateFormat" %&gt;
&lt;%= new SimpleDateFormat(pattern).format(new Date()) %&gt;
</code></pre>

<p>The Tag File implementation depends on simple convention of file naming and location. Note that the src/main/webapp/WEB-INF/tags directory is a required path. Inside this folder,  you may create any sub folder you want to organize the tag files. In our case, it's the myapp directory. A Tag File can be just like any JSP file you would normally create, except the tag directives are little different. You can see the JSP spec for a complete list of them. Whatever you output from the Tag File, it will be inserted and replaced the caller of the tag. Notice how I use the pattern attribute parameter to allow user change the date pattern, and it's available in the Tag File inside the Scriptlet Java code as variable.</p>

<p>Since you can write Tag Files just as you would with JSP, I will again caution the excessive use of Java code Scriptlet even inside Tag Files. If you must call Java code, try to wrap the code and replace by single line call, or write the Tag implementation with pure Java code; especially if you have very complex business logic involve. This would bring debugging much easier on your code and to maintain.</p>

<p>JSP tags provide a powerful way to construct your View layer in the web application. It helps you reuse code or content, and generating a specific piece of response.</p>

    </div>

        <br/>
    <ul>
                <li class="block">Next: <a href="/blog/2015/ee-jsp-generating-dynamic-content-with-jstl-tag-libraries" title="EE JSP - Generating Dynamic Content with JSTL Tag Libraries"><span>EE JSP - Generating Dynamic Content with JSTL Tag Libraries</span></a></li>
                        <li class="block">Previous: <a href="/blog/2015/ee-jsp-the-reversed-jacket-of-servlet" title="EE JSP - The Reversed Jacket of Servlet"><span>EE JSP - The Reversed Jacket of Servlet</span></a></li>
            </ul>
    
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="columns">
                <div class="column">
                    <div class="level">
                        <div class="level-item">
                            <a href="https://bulma.io">
                                <img
                                    src="/build/images/made-with-bulma.png"
                                    alt="Made with Bulma"
                                    width="128"
                                    height="24">
                            </a>
                            <a href="https://sculpin.io" class="mx-3">
                                <div class="width: 128px; height: 24px;">
                                <img
                                    src="/build/images/sculpin-mascot-jackson-micro.png"
                                    alt="Made with Sculpin"
                                    width="100%"
                                    height="100%">
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="level">
                        <div class="level-item">
                            <a href="/sitemap.xml">
                                SiteMap
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script to enable responsive navbar hamburger menu -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.querySelector('#navbarMenuButton');
            btn.addEventListener('click', () => {
                btn.classList.toggle('is-active');
                const menu = document.querySelector('#navbarMenu');
                menu.classList.toggle('is-active');
            });
        });
    </script>

        <script src="/build/app.js"></script>
    
        
    </body>
</html>
