<!DOCTYPE html>
<html>
    <head lang="en">
        <title>How to process stream and read text file in Java 8 &mdash; Zemian&#039;s Blog</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="robots" content="index, follow">
        <link rel="stylesheet" href="/build/app.css">

        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Zemian&#039;s Blog activity feed" />
                                        
                <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135626598-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-135626598-1');
        </script>
        
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1148923977922702" crossorigin="anonymous"></script>
            </head>
    <body>

    <div id="app">
        <div class="navbar is-primary">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item" href="/">
                        <img src="/build/images/zblog.svg" height="28">
                    </a>

                    <a class="navbar-burger" id="navbarMenuButton">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div class="navbar-menu" id="navbarMenu">
                    <div class="navbar-end is-size-4">
                        <a href="/tags" class="navbar-item">Tags</a>
                        <a href="/about" class="navbar-item">About</a>
                        <a href="/atom.xml" class="navbar-item">Feed</a>
                        <a href="/search" class="navbar-item">Search</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="container">
                <div class="columns is-centered">
                    <div class="column is-two-thirds">
                            <div class="level">
        <div class="level-item">
            Mar 31, 2014
        </div>
    </div>
    <div class="level">
        <div class="level-item">
                        <a class="tag mr-1" href="/blog/tags/java">java</a>
                    </div>
    </div>

    <h1 class="title">How to process stream and read text file in Java 8</h1>
    <div class="content">
        <p>I have converted one of my old utility class using latest Java8. I use this often to print content of manifest file to check any mysterious jar file for version etc. Just run "java ztools.PrintJar /path/to/my.jar" to see output. In the new code, you will see how I use the Java 8 stream processing to filter what I need from an Enumeration list, and then get the optional result if there is any. And then the BufferedReader now comes with "lines()" method that also do streaming. It's pretty cool to see Java 8 in actions!</p>

<pre><code>package ztools;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Optional;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/**
 * Print text based resource file inside a jar file. (eg: META-INF/MANIFEST.MF)
 * @author Zemian Deng
 */
public class PrintJar {
    public static void main(String[] args) throws Exception {
        // Search given name in a jar
        JarFile jarFile = new JarFile(args[0]);
        final String searchName = (args.length &gt;= 2) ? args[1] : "META-INF/MANIFEST.MF";
        Optional&lt;JarEntry&gt; searchResult = jarFile
                .stream()
                .filter(e -&gt; e.getName().equals(searchName))
                .findFirst();
        if (!searchResult.isPresent())
            throw new RuntimeException(searchName + " not found!");

        // Print the JarEntry
        JarEntry entry = searchResult.get();
        try (InputStream instream = jarFile.getInputStream(entry)) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(instream));
            reader.lines().forEach(line -&gt; System.out.println(line));
        }
    }
}
</code></pre>

    </div>

        <br/>
    <ul>
                <li class="block">Next: <a href="/blog/2014/how-to-reset-weblogic-admin-server-password" title="How to reset WebLogic admin server password"><span>How to reset WebLogic admin server password</span></a></li>
                        <li class="block">Previous: <a href="/blog/2014/how-to-create-weblogic-persistent-jdbcstore" title="How to create WebLogic Persistent JDBCStore"><span>How to create WebLogic Persistent JDBCStore</span></a></li>
            </ul>
    
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="columns">
                <div class="column">
                    <div class="level">
                        <div class="level-item">
                            <a href="https://bulma.io">
                                <img
                                    src="/build/images/made-with-bulma.png"
                                    alt="Made with Bulma"
                                    width="128"
                                    height="24">
                            </a>
                            <a href="https://sculpin.io" class="mx-3">
                                <div class="width: 128px; height: 24px;">
                                <img
                                    src="/build/images/sculpin-mascot-jackson-micro.png"
                                    alt="Made with Sculpin"
                                    width="100%"
                                    height="100%">
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="level">
                        <div class="level-item">
                            <a href="/sitemap.xml">
                                SiteMap
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script to enable responsive navbar hamburger menu -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.querySelector('#navbarMenuButton');
            btn.addEventListener('click', () => {
                btn.classList.toggle('is-active');
                const menu = document.querySelector('#navbarMenu');
                menu.classList.toggle('is-active');
            });
        });
    </script>

        <script src="/build/app.js"></script>
    
        
    </body>
</html>
