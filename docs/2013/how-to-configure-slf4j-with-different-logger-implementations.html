<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>How to configure SLF4J with different logger implementations</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
        <meta name="description" content="There are many good benefits in using slf4j library as your Java application logging API layer. Here I will show few examples on how to use and..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://zemian.github.io/2013/how-to-configure-slf4j-with-different-logger-implementations.html" rel="bookmark"
           title="Permalink to How to configure SLF4J with different logger implementations">How to configure SLF4J with different logger implementations</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-08-18T00:00:00-05:00">
                Published: Sun 18 August 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/slf4j.html">slf4j</a> <a href="https://zemian.github.io/tag/logging.html">logging</a> </p>
</footer><!-- /.post-info -->      <p>There are many good benefits in using <code>slf4j</code> library as your Java
application logging API layer. Here I will show few examples on how
to use and configure it with different loggers.</p>
<p>You can think of <code>slf4j</code> as an Java interface, and then you would
need an implementation (ONLY ONE) at runtime to provide the actual
logging details, such as writing to STDOUT or to a file etc. Each
logging implementation (or called binding) would obviously have their
own way of configuring the log output, but your application will remain
agnostic and always use the same <code>org.slf4j.Logger</code> API. Lets see how
this works in practice.</p>
<h2></h2>
<p>Using <code>slf4j</code> with Simple logger</p>
<p>Create a Maven based project and this in your <code>pom.xml</code>.</p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Now you may use <code>Logger</code> in your Java code like this.</p>
<div class="highlight"><pre><span></span><code><span class="n">package</span> <span class="n">deng</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.</span><span class="o">*</span><span class="p">;</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">Hello</span> <span class="p">{</span>
    <span class="n">static</span> <span class="n">Logger</span> <span class="n">LOGGER</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">Hello</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;I am on index </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>The above will get your program compiled, but when you run it, you will see these output.</p>
<div class="highlight"><pre><span></span><code><span class="n">bash</span><span class="o">&gt;</span><span class="w"> </span><span class="n">java</span><span class="w"> </span><span class="n">deng</span><span class="o">.</span><span class="n">Hello</span><span class="w"></span>
<span class="n">SLF4J</span><span class="p">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="s2">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span><span class="o">.</span><span class="w"></span>
<span class="n">SLF4J</span><span class="p">:</span><span class="w"> </span><span class="n">Defaulting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">operation</span><span class="w"> </span><span class="p">(</span><span class="n">NOP</span><span class="p">)</span><span class="w"> </span><span class="n">logger</span><span class="w"> </span><span class="n">implementation</span><span class="w"></span>
<span class="n">SLF4J</span><span class="p">:</span><span class="w"> </span><span class="n">See</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">slf4j</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">codes</span><span class="o">.</span><span class="n">html</span><span class="c1">#StaticLoggerBinder for further details.</span><span class="w"></span>
</code></pre></div>

<p>What its saying is that at runtime, you are missing the logging "implementation" (or the
logger binding), so <code>slf4j</code> simply use a "NOP" implmentation, which does nothing. In order
to see the output properly, you may try use an simple implementation that does not require
any configuration at all! Just go back to your <code>pom.xml</code> and add the following:</p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-simple<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Now you see logging output on STDOUT with INFO level. This simple logger will default
show any INFO level message or higher. In order to see DEBUG messages, you would
need to pass in this System Property <code>-Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG</code>
at your Java startup.</p>
<h2></h2>
<p>Using <code>slf4j</code> with Log4j logger</p>
<p>Now we can experiment and swap different logger implementations, but your application code
can remain the same. All we need is to replace <code>slf4j-simple</code> with another popular logger
implementation, such as the Log4j.</p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Again, we must configure logging per implementation that we picked.
In this case, we need an <code>src/main/resources/log4j.properties</code> file.</p>
<div class="highlight"><pre><span></span><code>    log4j.rootLogger=DEBUG, STDOUT
    log4j.logger.deng=INFO
    log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
    log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
    log4j.appender.STDOUT.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
</code></pre></div>

<p>Re-run your program, and you should see similar output.</p>
<h2></h2>
<p>Using <code>slf4j</code> with JDK logger</p>
<p>The JDK actually comes with a logger package, and you can replace <code>pom.xml</code>
with this logger implementation.</p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-jdk14<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Now the configuration for JDK logging is a bit difficult to work with. Not only need a
config file, such as <code>src/main/resources/logging.properties</code>, but you would also need
to add a System properties <code>-Djava.util.logging.config.file=logging.properties</code>
in order to have it pick it up. Here is an example to get you started:</p>
<div class="highlight"><pre><span></span><code><span class="na">.level</span><span class="err">=</span><span class="no">INFO</span><span class="w"></span>

<span class="nf">handlers</span><span class="err">=</span><span class="no">java.util.logging.ConsoleHandler</span><span class="w"></span>
<span class="nf">java.util.logging.ConsoleHandler.level</span><span class="err">=</span><span class="no">FINEST</span><span class="w"></span>
<span class="nf">deng.level</span><span class="err">=</span><span class="no">FINEST</span><span class="w"></span>
</code></pre></div>

<h2></h2>
<p>Using <code>slf4j</code> with Logback logger</p>
<p>The logback logger implementation is a super dupa quality implementation. If you intend
to write serious code that go into production, you may want to evaluate this option. Again
modify your <code>pom.xml</code> to replace with this:</p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0.13<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Here is a sample of configuration <code>src/main/resources/logback.xml</code> to get things started.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;STDOUT&quot;</span> <span class="na">class=</span><span class="s">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;encoder&gt;</span>
      <span class="nt">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="nt">&lt;/pattern&gt;</span>
    <span class="nt">&lt;/encoder&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>

  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;deng&quot;</span> <span class="na">level=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">&quot;INFO&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;STDOUT&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/root&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>

<h2></h2>
<p>Writing your own library with <code>slf4j</code> logger</p>
<p>If you are providing an Java library for large end users consumption, its good idea to
set your project to depend on <code>slf4j-api</code> only, and then let your user choose any
logger implementation at their development or runtime environment. As end users, they
may quickly select one of option above and take advatage of their own favorite logging
implementation features.</p>
<h2></h2>
<p>References</p>
<ul>
<li>
<p><a href="http://slf4j.org/">http://slf4j.org/</a></p>
</li>
<li>
<p><a href="http://logging.apache.org/log4j/1.2/">http://logging.apache.org/log4j/1.2/</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/logging/">http://docs.oracle.com/javase/7/docs/technotes/guides/logging/</a></p>
</li>
<li>
<p><a href="http://logback.qos.ch/">http://logback.qos.ch/</a></p>
</li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>