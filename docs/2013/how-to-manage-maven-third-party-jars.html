<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>How to manage Maven third party jars</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
        <meta name="description" content="How to manage Maven third party jars When you find yourself the need to load third party jars into Maven repository, there are few steps you..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://zemian.github.io/2013/how-to-manage-maven-third-party-jars.html" rel="bookmark"
           title="Permalink to How to manage Maven third party jars">How to manage Maven third party jars</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-06-23T00:00:00-05:00">
                Published: Sun 23 June 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/maven.html">maven</a> </p>
</footer><!-- /.post-info -->      <h2>How to manage Maven third party jars</h2>
<p>When you find yourself the need to load third party jars into Maven repository,
there are few steps you normally do to test it out. You first install them
locally into <code>$HOME/.m2/repository</code>, and then create your project pom that
list those dependency. When things look good, then you deploy into your own
hosted repository. The following scripts will help you perform these tasks.</p>
<p>Tip</p>
<p>If you have lot&#8217;s of jars under a group, it&#8217;s more conveninent to create
an extra pom that list these dependency and install/deploy it into the repository
as well. And then your project would only need to include one dependency
with <code>&lt;type&gt;pom&lt;/type&gt;</code>.</p>
<p>file: <code>bin/mvn-install.sh</code></p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">#</span>
<span class="c1"># Install local jar files into Maven repository. The artifact name would be same</span>
<span class="c1"># as the filename minus the extension.</span>
<span class="c1"># :Author: Zemian Deng</span>
<span class="c1"># :date: 2013T00:00:00-05:00</span>
<span class="c1">#</span>
<span class="c1"># Usage:</span>
<span class="c1">#   # Print as maven dependency used in pom file</span>
<span class="c1">#   mvn-install.sh mygroup 1.0.0 lib/*.jar</span>
<span class="c1">#</span>
<span class="c1">#   # Install jar files into local maven repo</span>
<span class="c1">#   RUN_TYPE=install mvn-install.sh mygroup 1.0.0 lib/*.jar</span>
<span class="c1">#</span>
<span class="c1">#   # Deploy jar files into remote maven repo</span>
<span class="c1">#   export REPO_URL=http://localhost/nexus/content/repositories/thirdparty</span>
<span class="c1">#   RUN_TYPE=deploy mvn-install.sh mygroup 1.0.0 lib/*.jar</span>
<span class="c1">#</span>

<span class="c1"># Capture command arguments and options</span>
<span class="nv">GROUP</span><span class="o">=</span><span class="nv">$1</span>
<span class="nb">shift</span>
<span class="nv">VERSION</span><span class="o">=</span><span class="nv">$1</span>
<span class="nb">shift</span>
<span class="nv">FILES</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$GROUP</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="s2">&quot;</span><span class="nv">$VERSION</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="s2">&quot;</span><span class="nv">$FILES</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
 <span class="nb">printf</span> <span class="s2">&quot;ERROR: invalid arguments: GROUP VERSION FILES...\n&quot;</span>
 <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">RUN_TYPE</span><span class="o">=</span><span class="si">${</span><span class="nv">RUN_TYPE</span><span class="p">:=</span><span class="s2">&quot;print&quot;</span><span class="si">}</span> <span class="c1"># values: print|install|deploy</span>
<span class="nv">REPO_ID</span><span class="o">=</span><span class="si">${</span><span class="nv">REPO_ID</span><span class="p">:=</span><span class="s2">&quot;nexus-server&quot;</span><span class="si">}</span> <span class="c1"># Id defined in user&#39;s settings.xml for authentication</span>
<span class="nv">REPO_URL</span><span class="o">=</span><span class="si">${</span><span class="nv">REPO_URL</span><span class="p">:=</span><span class="s2">&quot;http://localhost/nexus/content/repositories/thirdparty&quot;</span><span class="si">}</span>

<span class="c1"># For each file, perform action based on run type.</span>
<span class="k">for</span> FILE <span class="k">in</span> <span class="nv">$FILES</span><span class="p">;</span> <span class="k">do</span>
 <span class="nv">ARTIFACT</span><span class="o">=</span><span class="sb">`</span>basename <span class="nv">$FILE</span> <span class="s1">&#39;.jar&#39;</span><span class="sb">`</span>
 <span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$RUN_TYPE</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;deploy&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">printf</span> <span class="s2">&quot;Deploying file=</span><span class="nv">$FILE</span><span class="s2"> as artifact=</span><span class="nv">$ARTIFACT</span><span class="s2"> to repo=</span><span class="nv">$REPO_URL</span><span class="s2">\n&quot;</span>
  mvn deploy:deploy-file <span class="se">\</span>
   -DrepositoryId<span class="o">=</span><span class="nv">$REPO_ID</span> -Durl<span class="o">=</span><span class="nv">$REPO_URL</span> <span class="se">\</span>
   -DgroupId<span class="o">=</span><span class="nv">$GROUP</span> -DartifactId<span class="o">=</span><span class="nv">$ARTIFACT</span> -Dversion<span class="o">=</span><span class="nv">$VERSION</span> -Dpackaging<span class="o">=</span>jar <span class="se">\</span>
   -Dfile<span class="o">=</span><span class="nv">$FILE</span>
 <span class="k">elif</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$RUN_TYPE</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;install&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">printf</span> <span class="s2">&quot;Installing file=</span><span class="nv">$FILE</span><span class="s2"> as artifact=</span><span class="nv">$ARTIFACT</span><span class="s2">\n&quot;</span>
  mvn install:install-file <span class="se">\</span>
   -DgroupId<span class="o">=</span><span class="nv">$GROUP</span> -DartifactId<span class="o">=</span><span class="nv">$ARTIFACT</span> -Dversion<span class="o">=</span><span class="nv">$VERSION</span> -Dpackaging<span class="o">=</span>jar <span class="se">\</span>
   -Dfile<span class="o">=</span><span class="nv">$FILE</span>
 <span class="k">elif</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$RUN_TYPE</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;print&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">printf</span> <span class="s2">&quot;        &lt;dependency&gt;\n&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;            &lt;groupId&gt;</span><span class="nv">$GROUP</span><span class="s2">&lt;/groupId&gt;\n&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;            &lt;artifactId&gt;</span><span class="nv">$ARTIFACT</span><span class="s2">&lt;/artifactId&gt;\n&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;            &lt;version&gt;</span><span class="nv">$VERSION</span><span class="s2">&lt;/version&gt;\n&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;        &lt;/dependency&gt;\n&quot;</span>
 <span class="k">fi</span>
<span class="k">done</span>
</code></pre></div>

<p>Last updated 2013-06-18 19:14:37 EDT</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>