<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>ZBlog - httpd</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://zemian.github.io/2018/compling-apache-httpd-web-server-on-cygwin.html">Compling Apache HTTPD Web Server on Cygwin</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-03-07T00:00:00-05:00">
                Published: Wed 07 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/cygwin.html">cygwin</a> </p>
</footer><!-- /.post-info --><p>I have noted the instructions on how to build the HTTPD web server from
scratch in a Cygwin platoform in a Windows 7 PC.</p>
<p>Note that compiling full HTTPD on Cygwin is very slow compare to other
system such as Linux or MacOSX! If you are looking to do full HTTPD
server development, it’s recommend to use a real Linux env instead.</p>
<h1>Requirements:</h1>
<ul>
<li>
<p>Apache HTTPD version <code>2.4.9</code></p>
</li>
<li>
<p><code>CYGWIN\_NT-6.1 L328BDS002096US 2.10.0(0.325/5/3) 2018-02-02 15:16 x86\_64 Cygwin</code></p>
</li>
<li>
<p>Install the following cygwin packages:</p>
<p><code>autoconf
        make
        automake
        m4
        gcc-core
        libtool
        bison
        flex
        perl
        libapr1-devel
        libaprutil1-devel
        libiconv-devel
        libpcre-devel
        libgdbm-devel
        openssl-devel</code></p>
</li>
</ul>
<h1>Compiling the server</h1>
<p>Step 1. Get the source:</p>
<div class="highlight"><pre><span></span><code>git clone git://git.apache.org/httpd.git
cd httpd
git checkout 2.4.9

# You also need to get the required library sources
cd srclib
git clone git://git.apache.org/apr.git
cd apr
git checkout 1.6.3
cd ../
git clone git://git.apache.org/apr-util.git
cd apr-util
git checkout 1.6.1
cd ../../
</code></pre></div>

<p>Note that unlike the source pre-package you download from Apache site,
the <code>httpd</code> source repo does not have <code>configure</code> script, and you need
to generate it with <code>buildconf</code>. See next step for further instruction.</p>
<p>Note that the current <code>apr-util</code> repository is empty in master branch!
This is because they moved the code to <code>apr</code> starting version 2.0 dev,
but we still be using version 1.6.x, so we need to explicitly checkout
the tag or branch.</p>
<p>Step 2. Compiling</p>
<div class="highlight"><pre><span></span><code>./buildconf
./configure --prefix=/usr/local/apache2 \
  --with-included-apr \
  --enable-mpms-shared \
  --with-mpm=worker \
  --enable-mods-shared=most
make
make install
</code></pre></div>

<p>The option <code>--prefix=/usr/local/apache2</code> tells the build to install the
software into a user specific location.</p>
<p>The option <code>enable-mpms-shared</code> will make the mpm_module to be shared
library so you can switch to different threading model if you want.
Default to <code>worker</code> which should work nicely in Cygwin env.</p>
<p>The option <code>enable-mods-shared</code> will make most of the modules as shared
libraries. You can use <code>all</code> for full server.</p>
<p>The option <code>--with-included-apr</code> tells the build to use the <code>srclib/apr</code>
we have downloaded. Here you can use system installed <code>apr</code> if you like.
For an example:</p>
<div class="highlight"><pre><span></span><code>./configure --prefix=/usr/local/apache2 \
--with-apr=/usr/bin/apr-1-config \
--with-apr-util=/usr/bin/apu-1-config \
--enable-mpms-shared \
--with-mpm=worker \
--enable-mods-shared=most
</code></pre></div>

<p>For more details, see</p>
<ul>
<li>
<p><a href="http://httpd.apache.org/docs/2.4/install.html">http://httpd.apache.org/docs/2.4/install.html</a> or the INSTALL file
    from source.</p>
</li>
<li>
<p><a href="https://httpd.apache.org/docs/2.4/programs/configure.html">https://httpd.apache.org/docs/2.4/programs/configure.html</a></p>
</li>
</ul>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/compling-apache-httpd-web-server-on-linux-ubuntu.html" rel="bookmark"
                           title="Permalink to Compling Apache HTTPD Web Server on Linux (Ubuntu)">Compling Apache HTTPD Web Server on Linux (Ubuntu)</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-07T00:00:00-05:00">
                Published: Wed 07 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/linux.html">linux</a> </p>
</footer><!-- /.post-info -->                <div class="highlight"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">autoconf</span><span class="w"> </span><span class="n">automake</span><span class="w"> </span><span class="n">libtool</span><span class="w"> </span><span class="n">libtool</span><span class="o">-</span><span class="n">bin</span><span class="w"> </span><span class="n">libpcre3</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="n">libexpat1</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="n">libexpat1</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="n">libexpat1</span><span class="o">-</span><span class="n">dev</span><span class="w"></span>
<span class="n">mkdir</span><span class="w"> </span><span class="n">ossdev</span><span class="w"></span>
<span class="n">cd</span><span class="w"> </span><span class="n">ossdev</span><span class="w"></span>
<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">git</span><span class="w"></span>
<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">apr</span><span class="o">.</span><span class="n">git</span><span class="w"> </span><span class="n">httpd</span><span class="o">/</span><span class="n">srclib</span><span class="o">/</span><span class="n">apr</span><span class="w"></span>
<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">apr</span><span class="o">-</span><span class="n">util</span><span class="o">.</span><span class="n">git</span><span class="w"> </span><span class="n">httpd</span><span class="o">/</span><span class="n">srclib …</span></code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/compling-apache-httpd-web-server-on-linux-ubuntu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/compling-apache-httpd-web-server-on-macosx.html" rel="bookmark"
                           title="Permalink to Compling Apache HTTPD Web Server on MacOSX">Compling Apache HTTPD Web Server on MacOSX</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-07T00:00:00-05:00">
                Published: Wed 07 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/macosx.html">macosx</a> <a href="https://zemian.github.io/tag/httpd.html">httpd</a> </p>
</footer><!-- /.post-info -->                <p>Before you begin, you should know that the HTTPD server is very likely
already comes with your MacOSX! For example, here is how my server looks
like:</p>
<div class="highlight"><pre><span></span><code>$ apachectl -t -D DUMP_INCLUDES
Included configuration files:
  <span class="o">(</span>*<span class="o">)</span> /private/etc/apache2/httpd.conf
    <span class="o">(</span><span class="m">498</span><span class="o">)</span> /private/etc/apache2/extra/httpd-mpm.conf
    <span class="o">(</span><span class="m">504</span><span class="o">)</span> /private/etc …</code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/compling-apache-httpd-web-server-on-macosx.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/how-to-setup-httpd-reverse-proxy-to-tomcat.html" rel="bookmark"
                           title="Permalink to How to setup Httpd Reverse Proxy To Tomcat">How to setup Httpd Reverse Proxy To Tomcat</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-05T00:00:00-05:00">
                Published: Mon 05 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/reverse.html">reverse</a> <a href="https://zemian.github.io/tag/proxy.html">proxy</a> <a href="https://zemian.github.io/tag/tomcat.html">tomcat</a> </p>
</footer><!-- /.post-info -->                <p>Here is an example on how to configure HTTPD server with reverse proxy
into Tomcat, and adding the authenticated user as header and passing to
Tocmat server.</p>
<ol>
<li>Example of <code>httpd.conf</code> file</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># Apache httpd v2.4 minimal configuration</span><span class="w"></span>
<span class="n">ServerRoot</span><span class="w"> </span><span class="s2">&quot;/etc/httpd&quot;</span><span class="w"></span>
<span class="n">Listen</span><span class="w"> </span><span class="mi">80</span><span class="w"></span>

<span class="n">LoadModule</span><span class="w"> </span><span class="n">mpm_prefork_module</span><span class="w"> </span><span class="n">modules</span><span class="o">/</span><span class="n">mod_mpm …</span></code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/how-to-setup-httpd-reverse-proxy-to-tomcat.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/minimal-httpd-config-file.html" rel="bookmark"
                           title="Permalink to Minimal HTTPD config file">Minimal HTTPD config file</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-04T00:00:00-05:00">
                Published: Sun 04 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> </p>
</footer><!-- /.post-info -->                <p>If you are looking for small set of httpd config file, here is one I
come up with based on original <a href="https://wiki.apache.org/httpd/Minimal_Config">httpd
wiki</a>:</p>
<div class="highlight"><pre><span></span><code># Apache httpd v2.4 minimal configuration
ServerName localhost
ServerRoot &quot;/usr/local/apache2&quot;
Listen 80

User daemon
Group daemon

# Core modules
LoadModule mpm_worker_module modules/mod_mpm …</code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/minimal-httpd-config-file.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/how-to-find-httpd-config-file-location.html" rel="bookmark"
                           title="Permalink to How to find httpd config file location">How to find httpd config file location</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-28T00:00:00-05:00">
                Published: Wed 28 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> </p>
</footer><!-- /.post-info -->                <div class="highlight"><pre><span></span><code>Zemians-MacBook-Air:~ zemian$ httpd -t -D DUMP_INCLUDES
Included configuration files:
  (*) /private/etc/apache2/httpd.conf
    (498) /private/etc/apache2/extra/httpd-mpm.conf
    (504) /private/etc/apache2/extra/httpd-autoindex.conf
    (544) /private/etc/apache2/other/php7.conf
</code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/how-to-find-httpd-config-file-location.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/getting-started-with-apache-httpd-web-server-on-windows.html" rel="bookmark"
                           title="Permalink to Getting started with Apache HTTPD Web Server on Windows">Getting started with Apache HTTPD Web Server on Windows</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-27T00:00:00-05:00">
                Published: Tue 27 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/cygwin.html">cygwin</a> </p>
</footer><!-- /.post-info -->                <h1>Using native Windows Binary (without admin rights)</h1>
<ol>
<li>
<p>Download one of binary from
    <a href="https://httpd.apache.org/docs/current/platform/windows.html#down">https://httpd.apache.org/docs/current/platform/windows.html#down</a></p>
</li>
<li>
<p>Unzip a portable version (zip file) into <code>C:\Apache24</code></p>
</li>
<li>
<p>cd <code>C:\Apache24\bin</code> and run httpd.exe</p>
</li>
<li>
<p>Open browser to <a href="http://localhost">http://localhost</a></p>
</li>
</ol>
<p>Press <code>CTRL+C</code> to stop the …</p>
                <a class="readmore" href="https://zemian.github.io/2018/getting-started-with-apache-httpd-web-server-on-windows.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/how-to-setup-httpd-form-authentication-and-user-session-loginlogout.html" rel="bookmark"
                           title="Permalink to How to setup httpd form authentication and user session login/logout">How to setup httpd form authentication and user session login/logout</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-27T00:00:00-05:00">
                Published: Tue 27 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/authentication.html">authentication</a> <a href="https://zemian.github.io/tag/session.html">session</a> </p>
</footer><!-- /.post-info -->                <h2>Configuration setup for <code>httpd.conf</code></h2>
<p>Enable modules</p>
<div class="highlight"><pre><span></span><code>LoadModule auth_form_module modules/mod_auth_form.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule session_module modules/mod_session.so
LoadModule session_cookie_module modules/mod_session_cookie.so
</code></pre></div>

<p>NOTE: This configuration is only for tutorial purpose and …</p>
                <a class="readmore" href="https://zemian.github.io/2018/how-to-setup-httpd-form-authentication-and-user-session-loginlogout.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://zemian.github.io/2018/customizing-httpd-conf-with-special-request-header-and-filter.html" rel="bookmark"
                           title="Permalink to Customizing httpd conf with special request header and filter">Customizing httpd conf with special request header and filter</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-26T00:00:00-05:00">
                Published: Mon 26 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/httpd.html">httpd</a> <a href="https://zemian.github.io/tag/proxy.html">proxy</a> <a href="https://zemian.github.io/tag/filter.html">filter</a> </p>
</footer><!-- /.post-info -->                <h2>How to setup httpd reverse proxy for Tomcat</h2>
<p>Enable modules</p>
<div class="highlight"><pre><span></span><code>    # <span class="nv">NOTE</span>: <span class="k">If</span> <span class="nv">you</span> <span class="nv">are</span> <span class="nv">using</span> <span class="nv">Cygwin</span>, <span class="nv">these</span> <span class="nv">module</span> <span class="nv">requires</span> <span class="nv">cygserver</span> <span class="nv">to</span> <span class="nv">run</span><span class="o">!</span>
    #       <span class="k">else</span> <span class="nv">you</span> <span class="nv">get</span> <span class="nv">the</span> <span class="nv">following</span> <span class="nv">error</span>:
    #
    #[<span class="nv">Mon</span> <span class="nv">Feb</span> <span class="mi">26</span> <span class="mi">09</span>:<span class="mi">26</span>:<span class="mi">50</span>.<span class="mi">308620</span> <span class="mi">2018</span>] [<span class="nv">proxy</span>:<span class="nv">crit</span>] [<span class="nv">pid</span> <span class="mi">7564</span>] <span class="ss">(</span><span class="mi">88</span><span class="ss">)</span><span class="nv">Function</span> <span class="nv">not</span> <span class="nv">implemented</span>: <span class="nv">AH02478</span>: #<span class="nv">failed</span> <span class="nv">to</span> <span class="nv">create</span> <span class="nv">proxy</span> <span class="nv">mutex …</span></code></pre></div>
                <a class="readmore" href="https://zemian.github.io/2018/customizing-httpd-conf-with-special-request-header-and-filter.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>