When turning

    markdownTemplateEngine: "njk",

and changing permalinks to

    "permalink": "blog/{{ page.date | date: '%Y' }}/{{ title | slugify }}/index.html"


I will get error:

[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] > Having trouble rendering md template ./src/blog/2011/becoming-a-quartz-commiter.md

`TemplateContentRenderError` was thrown
[11ty] > (./src/blog/2011/becoming-a-quartz-commiter.md) [Line 1, Column 25]
  expected variable end

`Template render error` was thrown:
[11ty]     Template render error: (./src/blog/2011/becoming-a-quartz-commiter.md) [Line 1, Column 25]
      expected variable end
        at Object._prettifyError (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/nunjucks/src/lib.js:36:11)
        at Template.init (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/nunjucks/src/environment.js:511:19)
        at Template.Obj (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/nunjucks/src/object.js:62:15)
        at new Template (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/nunjucks/src/environment.js:478:18)
        at Nunjucks.compile (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/Engines/Nunjucks.js:479:14)
        at Markdown.compile (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/Engines/Markdown.js:63:28)
        at TemplateRender.getCompiledTemplate (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/TemplateRender.js:231:26)
        at Template.compile (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/TemplateContent.js:294:42)
        at async Template._render (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/TemplateContent.js:388:16)
        at async Template._getLink (/Users/zemian/my-web/zemian.github.io.git_11ty/node_modules/@11ty/eleventy/src/Template.js:252:24)
[11ty] Wrote 0 files in 0.04 seconds (v1.0.0)

Problem is that the example on permalinks is for "liquid" and not for "nunjucks".
The "nunjucks" filter must be a function call, and on top of this, "nunjucks" does not have "date" filter!

Solution?

Using dayjs: https://eszter.space/11ty-njk-filters/
or

Using moment with 'nunjucks-date-filter': https://github.com/e-picas/nunjucks-date-filter/blob/master/README.md