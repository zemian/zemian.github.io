<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Switching Different JDK in Cygwin</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
        <meta name="description" content="I love to use bash shell terminal. It’s a much more powerful terminal to do everyday tasks. Even in Windows, I can get most of what I need using..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://zemian.github.io/2018/switching-different-jdk-in-cygwin.html" rel="bookmark"
           title="Permalink to Switching Different JDK in Cygwin">Switching Different JDK in Cygwin</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-24T00:00:00-05:00">
                Published: Sat 24 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/cygwin.html">cygwin</a> <a href="https://zemian.github.io/tag/jdk.html">jdk</a> <a href="https://zemian.github.io/tag/java.html">java</a> </p>
</footer><!-- /.post-info -->      <p>I love to use bash shell terminal. It’s a much more powerful terminal to
do everyday tasks. Even in Windows, I can get most of what I need using
Cygwin. Unfortunately Java executable are native to OS only, and for
Windows, it would still work under Cygwin, but all the file system paths
are still native. Java can understand the mixed-path though, and it has
made somewhat easier than the Windows native backward slash path like
typing. This means we can define <code>JAVA_HOME</code> variable using mixed path
mode. In Cygwin, I define my <code>.bashrc</code> like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">zemian</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">jdk</span><span class="o">-</span><span class="mi">8</span><span class="n">u161</span><span class="w"></span>
<span class="n">PATH</span><span class="o">=$</span><span class="n">HOME</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">jdk</span><span class="o">-</span><span class="mi">8</span><span class="n">u161</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span><span class="o">$</span><span class="n">PATH</span><span class="w"></span>
</code></pre></div>

<p>I sometimes work with different version of JDK for various application
testing. In this case, I need a way to quicly switch JDK version in my
shell env. To make it easier, I have installed all of my JDK in a
<code>$HOME/apps</code> directory, and created symbolic links to each JDKs like
this:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">cd</span><span class="w"> </span><span class="err">$</span><span class="n">HOME</span><span class="o">/</span><span class="n">apps</span><span class="w"></span>
<span class="w">    </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">ld</span><span class="w"> </span><span class="n">jdk</span><span class="o">*</span><span class="w"></span>

<span class="w">    </span><span class="n">drwx</span><span class="o">------+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">58</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">8u161</span><span class="w"></span>
<span class="w">    </span><span class="n">drwx</span><span class="o">------+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">10</span><span class="o">:</span><span class="mi">57</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mf">9.0.4</span><span class="w"></span>
<span class="w">    </span><span class="n">drwx</span><span class="o">------+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">10</span><span class="o">:</span><span class="mi">48</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">10</span><span class="w"></span>

<span class="w">    </span><span class="n">lrwxrwxrwx</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">55</span><span class="w"> </span><span class="n">jdk8</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">8u161</span><span class="w"></span>
<span class="w">    </span><span class="n">lrwxrwxrwx</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">11</span><span class="o">:</span><span class="mo">02</span><span class="w"> </span><span class="n">jdk9</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mf">9.0.4</span><span class="w"></span>
<span class="w">    </span><span class="n">lrwxrwxrwx</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">zemian</span><span class="w"> </span><span class="n">staff</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">11</span><span class="o">:</span><span class="mo">00</span><span class="w"> </span><span class="n">jdk10</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">10</span><span class="w"></span>
</code></pre></div>

<p>Now that each JDK has a nice consistent version number in path, then I
create a shell function like this to switch between them:</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># Switching Multiple JDK</span>
    switchjava<span class="o">()</span> <span class="o">{</span>
            <span class="nv">JDK</span><span class="o">=</span><span class="s2">&quot;jdk</span><span class="nv">$1</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="o">[[</span> ! -d <span class="nv">$APPS_DIR</span>/<span class="nv">$JDK</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
                    <span class="nb">echo</span> <span class="s2">&quot;ERROR: JDK path not found: </span><span class="nv">$APPS_DIR</span><span class="s2">/</span><span class="nv">$JDK</span><span class="s2">&quot;</span>
                    <span class="k">return</span>
            <span class="k">fi</span>
            <span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="sb">`</span>cygpath -wm <span class="nv">$APPS_DIR</span>/<span class="nv">$JDK</span><span class="sb">`</span>
            <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$APPS_DIR</span>/<span class="nv">$JDK</span>/bin:<span class="nv">$PATH</span>

            <span class="c1"># Verifying java</span>
            <span class="nb">echo</span> <span class="s2">&quot;Switched JAVA_HOME to </span><span class="nv">$JAVA_HOME</span><span class="s2">&quot;</span>
            <span class="nb">echo</span> <span class="s2">&quot;Java Path:&quot;</span>
            which java
            <span class="nb">echo</span> <span class="s2">&quot;Java Version:&quot;</span>
            java -version
    <span class="o">}</span>
</code></pre></div>

<p>To put it in use, it looks like this:</p>
<div class="highlight"><pre><span></span><code>    $ switchjava 9
    Switched JAVA_HOME to C:/Users/zemian/apps/jdk-9.0.4
    Java Path:
    /home/zemian/apps/jdk9/bin/java
    Java Version:
    openjdk version &quot;9.0.4&quot;
    OpenJDK Runtime Environment (build 9.0.4+11)
    OpenJDK 64-Bit Server VM (build 9.0.4+11, mixed mode)

    $ switchjava 8
    Switched JAVA_HOME to C:/Users/zemian/apps/jdk-8u161
    Java Path:
    /home/zemian/apps/jdk8/bin/java
    Java Version:
    java version &quot;1.8.0_161&quot;
    Java(TM) SE Runtime Environment (build 1.8.0_161-b12)
    Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>