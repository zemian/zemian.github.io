<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>How to generate Redmine WAR application to run with Java</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
        <meta name="description" content="If you survey around Java open source land, it's really disappointing in not able to find a decent project management web app that we can use. The..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://zemian.github.io/2012/how-to-generate-redmine-war-application-to-run-with-java.html" rel="bookmark"
           title="Permalink to How to generate Redmine WAR application to run with Java">How to generate Redmine WAR application to run with Java</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-08-06T00:00:00-05:00">
                Published: Mon 06 August 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/jruby.html">jruby</a> <a href="https://zemian.github.io/tag/redmine.html">redmine</a> <a href="https://zemian.github.io/tag/issue-tracker.html">issue-tracker</a> </p>
</footer><!-- /.post-info -->      <p>If you survey around Java open source land, it's really disappointing in not able to  find a decent project management web app that we can use. The Java war file deployment in an app server is easy to use, and it would give us good performance. Especially if we already in a Java shop, having a project management tool that deploys in an existing app server would be easier to maintain.</p>
<p>I have found the Ruby's <a href="http://www.redmine.org">Redmine</a> to be a very good ONE-STOP-SHOP for most of your project development need. It has nice clean web interface, and the features are loaded: projects, users, issue tracking, wiki, source control viewer, documents, and it even has time tracking.</p>
<p>Altough the application is written in Ruby on Rails, you can run this with the JRuby perfectly fine on any Java app server. I've just done this and able to run it on JBossAS7.1.0 with jruby-1.6.7.2 and redmine-2.03.</p>
<p>For the impatients, you can actually grab my generated <code>redmine-2.0.3.war</code> from <a href="https://bitbucket.org/saltnlight5/sandbox/downloads">my sandbox</a>. I even provided an MySQL sql dump for you to get started without have to go through the building the war file. If you want to change the DB or any other settings, you can simply unpack the war file and edit the config files, then re-jar the war backup. This is still easier than building the war from scratch.</p>
<p>Here is how I build the war file. First step is setup a database. I picked MySQL.</p>
<div class="highlight"><pre><span></span><code>mysql&gt; create database redmine character set utf8;
mysql&gt; create user &#39;redmine&#39;@&#39;localhost&#39; identified by &#39;redmine123&#39;;
mysql&gt; grant all privileges on redmine.* to &#39;redmine&#39;@&#39;localhost&#39;;
</code></pre></div>

<p>Then prepare the Redmine with JRuby. Download the <code>redmine-2.0.3.zip</code> and unzip and then cd into this directory. Then run the following:</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="o">$</span><span class="n">JRUBY_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">gem</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">bundler</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="o">$</span><span class="n">JRUBY_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bundle</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">--</span><span class="n">without</span><span class="w"> </span><span class="n">development</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">rmagick</span><span class="w"> </span><span class="n">postgresql</span><span class="w"> </span><span class="n">sqlite</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="n">config</span><span class="o">/</span><span class="n">database</span><span class="o">.</span><span class="n">yml</span><span class="o">.</span><span class="n">example</span><span class="w"> </span><span class="n">config</span><span class="o">/</span><span class="n">database</span><span class="o">.</span><span class="n">yml</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="c1"># edit config/database.yml</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="c1"># type in your database connection info for &quot;production&quot; env.</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="o">$</span><span class="n">JRUBY_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rake</span><span class="w"> </span><span class="n">generate_secret_token</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="n">RAILS_ENV</span><span class="o">=</span><span class="n">production</span><span class="w"> </span><span class="o">$</span><span class="n">JRUBY_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rake</span><span class="w"> </span><span class="n">db</span><span class="p">:</span><span class="n">migrate</span><span class="w"></span>
<span class="o">$</span><span class="w"> </span><span class="n">RAILS_ENV</span><span class="o">=</span><span class="n">production</span><span class="w"> </span><span class="o">$</span><span class="n">JRUBY_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rake</span><span class="w"> </span><span class="n">redmine</span><span class="p">:</span><span class="n">load_default_data</span><span class="w"></span>
</code></pre></div>

<p>Now create the war file.</p>
<div class="highlight"><pre><span></span><code>$ <span class="nv">$JRUBY_HOME</span>/bin/gem install warbler
$ <span class="nv">$JRUBY_HOME</span>/bin/warble config
$ <span class="c1"># edit config/warble.rb</span>
$ <span class="c1"># replace: config.dirs = %w(app config lib log vendor tmp extra files)</span>
$ <span class="c1"># add: config.gems += [&quot;activerecord-jdbcmysql-adapter&quot;, &quot;jruby-openssl&quot;, &quot;i18n&quot;, &quot;rack&quot;]</span>
$ <span class="nv">$JRUBY_HOME</span>/bin/warble
</code></pre></div>

<p>After this, you will see <code>redmine-2.0.3.war</code> in the directory. Now you can drop it into any app server and you may kick start any projects!</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>