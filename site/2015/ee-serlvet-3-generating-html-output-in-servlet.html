<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>EE Serlvet 3 - Generating HTML output in Servlet</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
        <meta name="description" content="If you just need to handle a handful of requests URI in your EE web module, then it might be easier to generate your own HTML response in your..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://zemian.github.io/2015/ee-serlvet-3-generating-html-output-in-servlet.html" rel="bookmark"
           title="Permalink to EE Serlvet 3 - Generating HTML output in Servlet">EE Serlvet 3 - Generating HTML output in Servlet</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-01-01T00:00:00-05:00">
                Published: Thu 01 January 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/servlet.html">servlet</a> </p>
</footer><!-- /.post-info -->      <p>If you just need to handle a handful of requests URI in your EE web module, then it might be easier to generate your own HTML response in your Servlet code instead of using a full blown template library. As part of my examples, I tried out a very simple Java DSL that generate html output when writing your own Serlvet. The code looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">package</span> <span class="n">zemian</span><span class="o">.</span><span class="n">servlet3example</span><span class="o">.</span><span class="n">web</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.annotation.WebServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span>

<span class="nd">@WebServlet</span><span class="p">(</span><span class="s2">&quot;/index&quot;</span><span class="p">)</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">IndexServlet</span> <span class="n">extends</span> <span class="n">HtmlWriterServlet</span> <span class="p">{</span>

    <span class="nd">@Override</span>
    <span class="n">protected</span> <span class="n">void</span> <span class="n">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="p">)</span> <span class="n">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">HtmlWriter</span> <span class="n">html</span> <span class="o">=</span> <span class="n">createHtmlWriter</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">resp</span><span class="p">);</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">getMessage</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">html</span><span class="p">);</span>

        <span class="n">html</span><span class="o">.</span><span class="n">header</span><span class="p">()</span>
            <span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Welcome to Servlet 3 Example&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="s2">&quot;Let&#39;s explore Java Servlet 3.x Features.&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="o">.</span><span class="n">ul</span><span class="p">(</span>
                <span class="n">html</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="s2">&quot;Index&quot;</span><span class="p">,</span> <span class="s2">&quot;/index&quot;</span><span class="p">),</span>
                <span class="n">html</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;/hello&quot;</span><span class="p">),</span>
                <span class="n">html</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="s2">&quot;Sys Props&quot;</span><span class="p">,</span> <span class="s2">&quot;/sys-props&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">footer</span><span class="p">();</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div>

<p>I wrote a base HtmlWriterServlet class that provide a method where you can get an instance of a HtmlWriter builder. The benefit of wrapping the HTML like builder is that it's more easier to read and helps generate correct well form tags. For example the "ul" and "table" accepts Java List or Map object, and it generates the correct html tags.</p>
<p>Here is another example how I generate a table view of Java System Properties page with few lines of code:</p>
<div class="highlight"><pre><span></span><code><span class="n">package</span> <span class="n">zemian</span><span class="o">.</span><span class="n">servlet3example</span><span class="o">.</span><span class="n">web</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.TreeMap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.annotation.WebServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span>

<span class="nd">@WebServlet</span><span class="p">(</span><span class="s2">&quot;/sys-props&quot;</span><span class="p">)</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">SysPropsServlet</span> <span class="n">extends</span> <span class="n">HtmlWriterServlet</span> <span class="p">{</span>

    <span class="nd">@Override</span>
    <span class="n">protected</span> <span class="n">void</span> <span class="n">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="p">)</span> <span class="n">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">HtmlWriter</span> <span class="n">html</span> <span class="o">=</span> <span class="n">createHtmlWriter</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">resp</span><span class="p">);</span>
        <span class="n">TreeMap</span> <span class="n">sysProps</span> <span class="o">=</span> <span class="n">new</span> <span class="n">TreeMap</span><span class="p">(</span><span class="n">System</span><span class="o">.</span><span class="n">getProperties</span><span class="p">());</span>
        <span class="n">html</span><span class="o">.</span><span class="n">header</span><span class="p">()</span>
            <span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Java System Properties&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">sysProps</span><span class="p">)</span>
            <span class="o">.</span><span class="n">footer</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>The simple <a href="https://github.com/saltnlight5/java-ee6-examples/blob/master/servlet3-example/src/main/java/zemian/servlet3example/web/HtmlWriter.java">HtmlWriter</a>class provide few html builder methods and it can help generate HTML links with relative context paths. You can easily further improve it to help generate more HTML code such as form tags etc.</p>
<p>Also, note that ServletResponse object let you have full control on writing custom responses, so you are not restricted to only returing HTML. You can write binary output such as PDF or even MP3 files. You simply need to control the Response Writer and the correct corresponding content mime type and size that will return.</p>
<p>You can get these code at <a href="https://github.com/saltnlight5/java-ee6-examples/tree/master/servlet3-example">servlet3-example</a></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>