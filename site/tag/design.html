<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>ZBlog - design</title>
        <link rel="stylesheet" href="https://zemian.github.io/theme/css/main.css" />
        <link href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ZBlog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://zemian.github.io/">ZBlog</a></h1>
                <nav><ul>
                    <li><a href="https://zemian.github.io/pages/about-the-author.html">About The Author</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://zemian.github.io/2013/how-to-bring-pseudo-code-to-life.html">How to bring pseudo code to life</a></h1>
<footer class="post-info">
        <abbr class="published" title="2013-05-01T00:00:00-05:00">
                Published: Wed 01 May 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://zemian.github.io/author/zemian-deng.html">Zemian Deng</a>
        </address>
<p>In <a href="https://zemian.github.io/category/blog.html">Blog</a>.</p>
<p>tags: <a href="https://zemian.github.io/tag/design.html">design</a> <a href="https://zemian.github.io/tag/programming.html">programming</a> </p>
</footer><!-- /.post-info --><p>When designing a piece of software, I like to start with some pseudo code first, then work my way out. I tend to try mapping out the normal workflow (one that runs without any corner cases) with high level of actions as series of steps. Then the detailed implementation of the code can be filled in at later time.</p>
<p>Now with Java, you can easily do this with pseudo code, bring it to life, and still make it very maintainable. Try this out.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">package</span><span class="w"> </span><span class="n">deng</span><span class="p">.</span><span class="n">javademo</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @author Zemian Deng</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">PseudoCodeToLife</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="err">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="n">CreditCardProcessor</span><span class="w"> </span><span class="n">creditCardProcessor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CreditCardProcessor</span><span class="p">()</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">webServiceRequest</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">validateCardNumber</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">validateSecurityCode</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">checkAvailableCredit</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">chargeCard</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">webServiceResponse</span><span class="p">());</span><span class="w"></span>

<span class="w">            </span><span class="n">creditCardProcessor</span><span class="p">.</span><span class="n">run</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
</code></pre></div>

<p>Now that's as high level as you can get, but it still let me fill in the implementation without losing the overall requirement flow. To implement such workflow, we need a contract that allow processor to move data from one step to another, and yet it needs to perform some action along the way. How about an interface like this.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">package</span><span class="w"> </span><span class="n">deng</span><span class="p">.</span><span class="n">javademo</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @author Zemian Deng</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
</code></pre></div>

<p>Next is how to wire steps together. For now we can just do it inside <code>CreditCardProcessor</code>, but you can easily abstract that into a re-usable base class.</p>
<div class="highlight"><pre><span></span><code>    <span class="n">package</span> <span class="n">deng</span><span class="o">.</span><span class="n">javademo</span><span class="p">;</span>

    <span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="p">;</span>
    <span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

    <span class="o">/**</span>
     <span class="o">*</span> <span class="nd">@author</span> <span class="n">Zemian</span> <span class="n">Deng</span>
     <span class="o">*/</span>
    <span class="n">public</span> <span class="k">class</span> <span class="nc">CreditCardProcessor</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">StepAction</span><span class="o">&gt;</span> <span class="n">steps</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">StepAction</span><span class="o">&gt;</span><span class="p">();</span>

        <span class="n">public</span> <span class="n">CreditCardProcessor</span> <span class="n">step</span><span class="p">(</span><span class="n">StepAction</span> <span class="n">stepAction</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">steps</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">stepAction</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">this</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">Exchange</span> <span class="n">exchange</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Exchange</span><span class="p">();</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">StepAction</span> <span class="n">step</span> <span class="p">:</span> <span class="n">steps</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">step</span><span class="o">.</span><span class="n">onAction</span><span class="p">(</span><span class="n">exchange</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>

<p>Pretty straight forward. Here I used an <code>Exchange</code> as message, passing between each steps to allow the workflow to exchange data. You can wrap just about any real payload and/or add a Map of header properties.</p>
<p>Now what we are missing is just filling in each step of actions. Since we have an explicit step name when defining the workflow, we can just generate these method and fill in the actions per step required. I will add them all inside the <code>PseudoCodeToLife</code> and reprint it here.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">package</span><span class="w"> </span><span class="n">deng</span><span class="p">.</span><span class="n">javademo</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @author Zemian Deng</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">PseudoCodeToLife</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="err">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="n">CreditCardProcessor</span><span class="w"> </span><span class="n">creditCardProcessor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CreditCardProcessor</span><span class="p">()</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">webServiceRequest</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">validateCardNumber</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">validateSecurityCode</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">checkAvailableCredit</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">chargeCard</span><span class="p">())</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">webServiceResponse</span><span class="p">());</span><span class="w"></span>

<span class="w">            </span><span class="n">creditCardProcessor</span><span class="p">.</span><span class="n">run</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">webServiceRequest</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;webServiceRequest step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">validateCardNumber</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;validateCardNumber step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">validateSecurityCode</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;validateSecurityCode step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">checkAvailableCredit</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;checkAvailableCredit step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">chargeCard</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;chargeCard step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StepAction</span><span class="w"> </span><span class="n">webServiceResponse</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StepAction</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">                </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onAction</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;webServiceResponse step.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
</code></pre></div>

<p>That's all to this. What do you think? I think it's a simple way to tackle business problems. Simple software make less bugs and easier to maintain.</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://zemian.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>